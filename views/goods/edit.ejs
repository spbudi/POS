<%- include('../partials/header') %>

<div id="wrapper">
  <%- include('../partials/sidebar') %>
  <div id="content-wrapper" class="d-flex flex-column">
    <div id="content">
      <%- include('../partials/topbar') %>
      <!-- Begin Page Content -->
      <div class="container-fluid">
        <!-- Page Heading -->
        <h1 class="h3 mb-2 text-gray-800">Goods</h1>

        <!-- DataTales Example -->
        <form action="" method="post" encType="multipart/form-data">
          <div class="card shadow mb-4">
              <div class="card-header py-3">
                  <h4 class="m-0 font-weight-bold text-primary">Form Edit</h6>
              </div>
              <div class="card-body">
                  <input type="hidden" name="page" value="1">
                  <div class="row mb-3 form-switch">
                      <label for="barcode" class="form-check-label col-sm-2 text-lg ">Barcode</label>
                      <div class="col-sm-10">
                          <input type="string" class="form-control" name="barcode" placeholder=""
                          value="<%= item.barcode %>" readonly>
                      </div>
                  </div>
                  <div class="row mb-3 form-switch">

                      <label for="name" class="form-check-label col-sm-2 text-lg ">Name</label>
                      <div class="col-sm-10">
                          <input type="string" class="form-control" name="name" placeholder=""
                          value="<%= item.name %>">
                      </div>
                  </div>
                  <div class="row mb-3 form-switch">
                      <label for="stock" class="form-check-label col-sm-2 text-lg ">stock</label>
                      <div class="col-sm-10">
                          <input type="number" class="form-control" name="stock" placeholder="0"
                          value="<%= item.stock %>">
                      </div>
                  </div>
                  <div class="row mb-3 form-switch">
                    <label for="purchaseprice" class="form-check-label col-sm-2 text-lg ">Purchase Price</label>
                    <div class="col-sm-10">
                        <input type="number" class="form-control" name="purchaseprice" placeholder="0"
                        value="<%= item.purchaseprice %>">
                    </div>
                </div>
                  <div class="row mb-3 form-switch">
                    <label for="sellingprice" class="form-check-label col-sm-2 text-lg ">Selling Price</label>
                    <div class="col-sm-10">
                        <input type="number" class="form-control" name="sellingprice"
                            placeholder="0"
                            value="<%= item.sellingprice %>">
                    </div>
                </div>
                <div class="row mb-3 form-switch">
                  <label for="unit" class="form-check-label col-sm-2 text-lg">Unit</label>
                  <div class="col-sm-10">
                      <select class="form-control" name="unit" required>
                        <option selected><%= item.unit %></option>
                        <% units.forEach((item)=> { %>
                          <option value="<%= item.unit %>">
                              <%= item.unit %> for <%= item.name %> 
                          </option>
                          <% }) %>
                      </select>
                  </div>
              </div>

              <div class="row mb-3 form-switch ">
                <label for="formFile" class="form-check-label col-sm-2 text-lg">Picture</label>
                <div class="col-sm-10">
                    <input type="file" class="form-control upload-box" name="sampleFile" id="imgInp"
                        accept="image/png, image/gif, image/jpeg" required>
                        <img id="blah" src="/images/upload/<%= item.picture %>" alt="your image" width="400" height="auto"/>
                </div>
            </div>

              </div>
              <div class="card-footer">
                  <div class="btn-group">
                      <button type="submit" class="btn btn-success active" title="Save" aria-current="page"><i
                              class="fas fa-solid fa-database"></i></button>
                      <button class="btn btn-success ">Save</button>
                  </div>
                  <div class="btn-group">
                      <a href="/goods" class="btn btn-warning active" aria-current="page"><i class="fa-solid fa-rotate-left"></i></a>
                      <a href="/goods" class="btn btn-warning">Back</a>
                  </div>
              </div>
          </div>
      </form>
      </div>
    </div>
    <%- include('../partials/copyright') %>
  </div>
</div>
<script>
    imgInp.onchange = evt => {
        const [file] = imgInp.files
        if (file) {
            blah.src = URL.createObjectURL(file)
        }
    }
</script>

<%- include('../partials/footer') %>